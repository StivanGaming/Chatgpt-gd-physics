<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sea Level Riser Map</title>
<style>
  html, body { height: 100%; margin: 0; padding: 0; }
  #map { width: 100%; height: 100%; }
  #sliderContainer {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 1000;
    background: rgba(255,255,255,0.8);
    padding: 10px;
    border-radius: 8px;
  }
</style>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
<div id="map"></div>
<div id="sliderContainer">
  Sea Level: <span id="seaLevelValue">0</span> m
  <input type="range" id="seaLevelSlider" min="-1000" max="1000" value="0" step="10" style="width:200px;">
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// Initialize map
var map = L.map('map').setView([0, 0], 2);

// Add base layer
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: ''
}).addTo(map);

// Function to get color based on elevation vs sea level
function getColor(elev, seaLevel) {
  if (elev <= seaLevel) return '#1e90ff'; // water
  return '#7cfc00'; // land
}

// Placeholder raster layer (normally you would load real elevation data)
var canvasLayer = L.canvasLayer().delegate({
  onDrawLayer: function(info) {
    var ctx = info.canvas.getContext('2d');
    var bounds = info.layer._map.getBounds();
    var zoom = info.layer._map.getZoom();
    var width = info.canvas.width;
    var height = info.canvas.height;
    
    ctx.clearRect(0,0,width,height);
    
    // Simple simulation: higher latitudes = lower elevation, just for demo
    for (var y=0; y<height; y+=2){
      for (var x=0; x<width; x+=2){
        var lat = bounds.getNorth() - (y/height)*(bounds.getNorth()-bounds.getSouth());
        var lon = bounds.getWest() + (x/width)*(bounds.getEast()-bounds.getWest());
        var elev = 1000*Math.sin(lat/180*Math.PI)*Math.cos(lon/180*Math.PI); // fake elevation
        var color = getColor(elev, seaLevelSlider.value);
        ctx.fillStyle = color;
        ctx.fillRect(x,y,2,2);
      }
    }
  }
}).addTo(map);

// Update sea level value display
var seaLevelSlider = document.getElementById('seaLevelSlider');
var seaLevelValue = document.getElementById('seaLevelValue');
seaLevelSlider.addEventListener('input', function(){
  seaLevelValue.textContent = seaLevelSlider.value;
  canvasLayer.redraw();
});

</script>
<script src="https://cdn.jsdelivr.net/gh/Leaflet/Leaflet.CanvasLayerField/dist/Leaflet.CanvasLayerField.js"></script>
</body>
</html>
